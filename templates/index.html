<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="description" content="Geschichten und Bilder, die bleiben">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>I B K | Bilderbücher</title>

  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

  <style>
    /* Optional etwas Styling */
    details {
      margin-bottom: 20px;
    }

    summary {
      font-size: 24px;
      font-weight: bold;
      cursor: pointer;
      margin-bottom: 10px;
    }
  </style>

</head>

<body>

{% include 'navbar.html' %}

<main>

  {% for titel, liste in kategorien %}

    <details>
      <summary>{{ titel }}</summary>

      <div class="book-list">

        {% for produkt in liste %}
        <div class="book">

          <div class="image-wrapper">

            <img 
              {% if produkt.bilder and produkt.bilder|length > 0 %}
                {% if produkt.bilder[0].startswith('http') %}
                  src="{{ produkt.bilder[0] }}"
                {% else %}
                  src="{{ url_for('static', filename=produkt.bilder[0]) }}"
                {% endif %}
              {% else %}
                src="{{ url_for('static', filename='images/default.jpg') }}"
              {% endif %}
              alt="{{ produkt.name }}">

            <a href="{{ url_for('produkt_detail', produkt_id=produkt.id) }}" class="hover-btn">
              Mehr erfahren
            </a>

          </div>

          <h3>{{ produkt.name }}</h3>
          <p>{{ produkt.preis }} €</p>

          <button 
            onclick="addToCart(
              '{{ produkt.name }}', 
              {{ produkt.preis }}, 
              {% if produkt.bilder and produkt.bilder|length > 0 %}
                {% if produkt.bilder[0].startswith('http') %}
                  '{{ produkt.bilder[0] }}'
                {% else %}
                  '{{ url_for('static', filename=produkt.bilder[0]) }}'
                {% endif %}
              {% else %}
                '{{ url_for('static', filename='images/default.jpg') }}'
              {% endif %},
              '{{ produkt.ean }}'
            )">
            In den Warenkorb
          </button>

        </div>
        {% endfor %}

      </div>

    </details>

  {% endfor %}


  <section class="newsletter-section">
    <h3>Melde dich zu unserem Newsletter an!</h3>
    <form action="{{ url_for('newsletter') }}" method="POST">
      <input type="email" name="email" placeholder="Ihre E-Mail-Adresse" required>
      <button type="submit">Anmelden</button>
    </form>
  </section>

</main>

{% include 'footer.html' %}

<script src="{{ url_for('static', filename='js/cart.js') }}"></script>

</body>
</html>
